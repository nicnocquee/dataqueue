---
title: Initialize Queue
---

After defining your job types, payloads, and handlers, you need to initialize the job queue.

Create a file (for example, `lib/queue.ts`) to set up and reuse your job queue instance.

```typescript
import { initJobQueue } from '@nicnocquee/dataqueue';
import { type JobPayloadMap } from './job-handlers';

let jobQueuePromise: ReturnType<typeof initJobQueue<JobPayloadMap>> | null =
  null;

export const getJobQueue = async () => {
  if (!jobQueuePromise) {
    jobQueuePromise = initJobQueue<JobPayloadMap>({
      databaseConfig: {
        connectionString: process.env.PG_DATAQUEUE_DATABASE, // Set this in your environment
      },
      verbose: process.env.NODE_ENV === 'development',
    });
  }
  return jobQueuePromise;
};
```

You can now use this queue instance throughout your app to add jobs, process jobs, and more.
